<div class="quiz-page">
  <div class="quiz-container">
    <!-- Container Principal -->
    <main class="main-content">
      <div class="quiz-area">
        <!-- Card da Pergunta -->
        <div class="question-card">
          <div class="placa-image">
            <img
              [src]="questaoAtual().placa.obterImagemUrl()"
              [alt]="questaoAtual().placa.obterNome()"
              class="placa-img"
            />
          </div>
          <h2 class="question-text">Qual é o significado desta placa?</h2>
        </div>

        <!-- Opções de Resposta -->
        <div class="options-container">
          @for (opcao of questaoAtual()?.opcoes; track opcao; let i = $index) {
          <button
            class="option-button"
            [class.correct]="
              respostaSelecionada() && opcao === questaoAtual()?.respostaCorreta
            "
            [class.incorrect]="
              respostaSelecionada() &&
              opcao !== questaoAtual()?.respostaCorreta &&
              opcao === respostaSelecionada()
            "
            [class.disabled]="respostaSelecionada()"
            [disabled]="respostaSelecionada()"
            (click)="selecionarResposta(opcao)"
          >
            <span class="option-letter">{{ obterLetraOpcao(i) }}</span>
            <span class="option-text">{{ opcao }}</span>
            @if (respostaSelecionada()) { @if (opcao ===
            questaoAtual()?.respostaCorreta) {
            <span class="option-icon correct">✔️</span>
            } @else if (opcao === respostaSelecionada() && opcao !==
            questaoAtual()?.respostaCorreta) {
            <span class="option-icon incorrect">❌</span>
            } }
          </button>
          }
        </div>

        <!-- Feedback Pós-Resposta -->
        @if (respostaSelecionada()) {
        <div class="feedback-container">
          @if (respostaSelecionada() === questaoAtual()?.respostaCorreta) {
          <div class="feedback correct">
            <span class="feedback-icon">✔️</span>
            <span class="feedback-text">Correto!</span>
          </div>
          } @else {
          <div class="feedback incorrect">
            <span class="feedback-icon">❌</span>
            <span class="feedback-text">
              Incorreto – a correta era: {{ questaoAtual()?.respostaCorreta }}
            </span>
          </div>
          }
        </div>
        }

        <!-- Botão Próximo -->
        @if (respostaSelecionada()) {
        <div class="next-button-container">
          <button class="btn-proximo" (click)="proximaQuestao()">
            <span class="btn-text">Próximo</span>
            <span class="btn-icon">→</span>
          </button>
        </div>
        }

        <!-- Progresso -->
        <div class="progress-container">
          <div class="progress-text">
            Questão {{ questaoAtualIndex() + 1 }} de {{ questoes().length }}
          </div>
          <div class="progress-bar">
            <div
              class="progress-fill"
              [style.width.%]="
                ((questaoAtualIndex() + 1) / questoes().length) * 100
              "
            ></div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
