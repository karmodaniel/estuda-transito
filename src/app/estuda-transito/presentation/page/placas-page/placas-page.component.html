<div class="estudo-page">
  <header class="page-header">
    <h1>Estudar Placas de Trânsito</h1>
    <p>Aprenda sobre as principais placas de trânsito brasileiras</p>
  </header>

  <div class="controles-section">
    <div class="filtros-section">
      <div class="filtro-grupo">
        <label for="categoria">Categoria:</label>
        <select
          id="categoria"
          [value]="categoriaSelecionada()"
          (change)="onCategoriaChange($event)"
        >
          <option value="">Todas as categorias</option>
          @for (categoria of categorias(); track categoria.codigo) {
          <option [value]="categoria.codigo">
            {{ categoria.nome }}
          </option>
          }
        </select>
      </div>

      <div class="filtro-grupo">
        <label for="busca">Buscar:</label>
        <input
          id="busca"
          type="text"
          [value]="termoBusca()"
          (input)="onTermoBuscaChange($event)"
          placeholder="Digite para buscar placas..."
        />
      </div>

      <button class="btn-limpar" (click)="limparFiltros()">
        Limpar Filtros
      </button>
    </div>

    <div class="visualizacao-section">
      <button
        class="btn-visualizacao"
        [class.active]="modoVisualizacao() === 'grid'"
        (click)="modoVisualizacao.set('grid')"
      >
        <span nz-icon nzType="appstore" nzTheme="outline"></span>
        Grid
      </button>
      <button
        class="btn-visualizacao"
        [class.active]="modoVisualizacao() === 'lista'"
        (click)="modoVisualizacao.set('lista')"
      >
        <span nz-icon nzType="bars" nzTheme="outline"></span>
        Lista
      </button>
    </div>
  </div>

  <div class="estatisticas-section">
    <div class="estatistica-item">
      <span class="estatistica-valor">{{ totalPlacas() }}</span>
      <span class="estatistica-label">Total de Placas</span>
    </div>
    <div class="estatistica-item">
      <span class="estatistica-valor">{{ placasFiltradas().length }}</span>
      <span class="estatistica-label">Placas Encontradas</span>
    </div>
  </div>

  <div
    class="placas-container"
    [class.modo-lista]="modoVisualizacao() === 'lista'"
  >
    @for (placa of placasFiltradas(); track placa.codigo) {
    <app-placa-card
      [placa]="placa"
      (cardClick)="onPlacaClick(placa)"
    ></app-placa-card>
    }
  </div>

  @if (placasFiltradas().length === 0) {
  <div class="sem-resultados">
    <p>Nenhuma placa encontrada com os filtros aplicados.</p>
    <button (click)="limparFiltros()">Limpar Filtros</button>
  </div>
  }
</div>
